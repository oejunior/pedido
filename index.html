
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador de Protocolo - Docce</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'PT Sans', sans-serif;
      background: linear-gradient(to right, #fbb03b, #8cc63f);
    }
    .container {
      max-width: 800px;
      margin: 30px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .logo {
      display: block;
      margin: 0 auto 20px;
      max-width: 160px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #444;
    }
    .row {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .row input, .row select {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
    }
    .row input[type="text"],
    .row input[type="number"],
    .row select {
      flex: 1;
    }
    .item-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .item-row input {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }
    .qtd {
      width: 80px;
    }
    .nome-item {
      flex: 1;
    }
    .valor {
      width: 120px;
    }
    button {
      background: #fbb03b;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    .confirmacao {
      margin-top: 30px;
      padding: 15px;
      background: #f0fff0;
      border: 1px solid #8bc34a;
      white-space: pre-wrap;
      font-family: monospace;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo docce (1).png" alt="Logo Docce" class="logo" />
    <h1>Gerador de Protocolo</h1>

    <div class="row">
      <input type="text" id="nome" placeholder="Nome" />
      <input type="text" id="telefone" placeholder="Telefone" maxlength="15" style="width: 160px;" />
    </div>

    <div class="row">
      <select id="tipo" onchange="toggleEndereco()" style="width: auto;">
        <option value="retirada">Retirada</option>
        <option value="delivery">Delivery</option>
      </select>
    </div>

    <div id="enderecoCampos" style="display: none;">
      <div class="row">
        <input type="text" id="rua" placeholder="Rua" />
        <input type="text" id="numero" placeholder="Número" maxlength="5" style="width: 100px;" />
      </div>
      <div class="row">
        <input type="text" id="bairro" placeholder="Bairro" />
        <select id="taxa" style="width: auto;">
          <option value="">Taxa de entrega</option>
          <option value="7">R$7</option>
          <option value="8">R$8</option>
          <option value="9">R$9</option>
          <option value="10">R$10</option>
          <option value="11">R$11</option>
          <option value="12">R$12</option>
          <option value="13">R$13</option>
          <option value="14">R$14</option>
          <option value="15">R$15</option>
        </select>
      </div>
    </div>

    <div id="itensContainer">
      <label><strong>Itens:</strong></label>
    </div>
    <button onclick="addItem()">Adicionar item</button>
<br><br>

    <div class="row">
      <select id="pagamento" style="width: auto;">
        <option value="PIX">PIX</option>
        <option value="Dinheiro">Dinheiro</option>
        <option value="Cartão de crédito">Cartão de crédito</option>
        <option value="Cartão de débito">Cartão de débito</option>
      </select>
      <input type="number" id="valorPago" value="0" placeholder="Valor pago" style="width: 140px;" />
    </div>

    <button onclick="gerarProtocolo()">Gerar Protocolo</button>

    
    
    <div id="confirmacao" class="confirmacao" style="display:none; white-space: pre-wrap; font-family: monospace;"></div>
    <button onclick="copiarTexto()" id="btnCopiar" style="display:none;">Copiar comprovante</button>
    
    <button onclick="copiarTexto()" id="btnCopiar" style="display:none;">Copiar comprovante</button>
    
  </div>

  <script>
    function toggleEndereco() {
      const tipo = document.getElementById("tipo").value;
      document.getElementById("enderecoCampos").style.display =
        tipo === "delivery" ? "block" : "none";
    }

    function addItem() {
      const container = document.getElementById("itensContainer");
      const row = document.createElement("div");
      row.className = "item-row";
      row.innerHTML = `
        <input type="number" class="qtd" placeholder="Qtd">
        <input type="text" class="nome-item" placeholder="Nome do item">
        <input type="number" class="valor" placeholder="Valor unitário">
      `;
      container.appendChild(row);
    }

    function gerarProtocolo() {
      const nome = document.getElementById("nome").value;
      const telefone = document.getElementById("telefone").value;
      const tipo = document.getElementById("tipo").value;
      const rua = document.getElementById("rua").value;
      const numero = document.getElementById("numero").value;
      const bairro = document.getElementById("bairro").value;
      const taxa = tipo === "delivery" ? parseFloat(document.getElementById("taxa").value || 0) : 0;

      const pagamento = document.getElementById("pagamento").value;
      const valorPago = parseFloat(document.getElementById("valorPago").value || 0);

      const itens = Array.from(document.querySelectorAll(".item-row")).map(row => {
        const qtd = parseInt(row.querySelector(".qtd").value || 0);
        const nome = row.querySelector(".nome-item").value;
        const valor = parseFloat(row.querySelector(".valor").value || 0);
        return { qtd, nome, valor, total: qtd * valor };
      });

      const totalItens = itens.reduce((sum, item) => sum + item.total, 0);
      const total = totalItens + taxa;
      const cobrar = Math.max(0, total - valorPago);

      const protocolo = Math.random().toString(36).substr(2, 6).toUpperCase();

      let mensagem = `Protocolo: ${protocolo}
Nome: ${nome}
Telefone: ${telefone}
Tipo: ${tipo}`;
      if (tipo === "delivery") {
        mensagem += `
Endereço: ${rua}, ${numero} - ${bairro}
Taxa de entrega: R$${taxa.toFixed(2)}`;
      }
      mensagem += `

Itens:
`;
      itens.forEach(item => {
        mensagem += `- ${item.qtd} x ${item.nome} (R$${item.valor.toFixed(2)}) = R$${item.total.toFixed(2)}
`;
      });
      mensagem += `
Total: R$${total.toFixed(2)}
Forma de pagamento: ${pagamento}
Valor pago: R$${valorPago.toFixed(2)}
Cobrar do cliente: R$${cobrar.toFixed(2)}`;

      const confirmacao = document.getElementById("confirmacao");
      confirmacao.textContent = mensagem;
      confirmacao.style.display = "block";
    }
  
    function copiarTexto() {
      const texto = document.getElementById("confirmacao").innerText;
      navigator.clipboard.writeText(texto).then(function() {
        alert("Comprovante copiado para a área de transferência!");
      });
    }

    const btnCopiar = document.getElementById("btnCopiar");
    const divConfirmacao = document.getElementById("confirmacao");
    const originalGerarProtocolo = gerarProtocolo;

    gerarProtocolo = function () {
      originalGerarProtocolo();
      btnCopiar.style.display = "inline-block";
    };
    </script>
    
</body>
</html>
